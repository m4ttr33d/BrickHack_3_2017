doctype html
html
  head
    include includes/head.pug
  body
    h3 Chat Room
    div(id="chat-room")
      div(id="room")
        ul(id="messages")
      div(id="chatwrap")
        div(id="chatinput")
          form.form-group.chatbox(name="chatbox")
            div.input-group.input-group-lg
              input.form-control(id="m", name="message", type="text", placeholder="Enter message here!")
              span.input-group-btn
                button.btn.btn-primary(id = "chatbutton", type = "button") Send

    script.
      var btn = document.getElementById('chatbutton')
        .addEventListener("click", function (event) {
          event.preventDefault();
          submitChat();
        });

      var input = document.getElementById("m")
        .addEventListener("keydown", function (event) {
            if (event.code == 13) {
              submitChat();
            }
        })

      function submitChat() {
        var msg = user + ': ' + $('#m').val();
        socket.emit('chat message', msg);
        $('#m').val('');
      }

      function onEnter(event, id) {
        if (event.keyCode == 13) { document.getElementById(id).click(); }
        return false;
      }

      var socket = io();
      var user = Math.random();
      socket.on('chat message', function (msg) {
        $('#messages').append($('<li>').text(msg));
        var m = $('#room');
        m.scrollTop(m.prop("scrollHeight"));
      });
//<div id="chat-room">
//  <div id="room">
//    <h2>Chat Room</h2>
//      <ul id="messages">
//      </ul>
//
//      <div id="chatwrap">
//        <div id="chatinput">
//          <form name="chatbox" class="form-group">
//          <div class="input-group input-group-lg">
//            <input class="form-control" id="m" name="message" type="text" autocomplete="off" onkeydown="onEnter(this,'chatbutton')" autofocus/><br>
//            <span class="input-group-btn">
//                <button class="btn btn-primary" id="chatbutton" type="button" onclick="submitChat()">Send</button>
//              </span>
//            </div>
//          </form>
//        </div>
//      </div>
//    </div>
//</div>
