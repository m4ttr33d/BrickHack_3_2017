<!doctype html>
<html>
<head>
    <title>Socket.IO chat</title>
    <link rel="stylesheet" type="text/css" href="./asset/css/test.css">
  <style>

  </style>
</head>
<body>
<!--<div class="chat-room" id="chat-room">-->
  <!--<ul id="messages"></ul>-->
<!--</div>-->
<!--<form action="">-->
    <!--<input id="m" autocomplete="off" /><button>Send</button>-->
<!--</form>-->
<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
<div id="chat-room">
  <div id="room">
    <h2>Chat Room</h2>
      <ul id="messages">
      </ul>

      <div id="chatwrap">
        <div id="chatinput">
          <form name="chatbox" class="userchat">
            <input class="userchat chatbox" id="m" name="message" type="text" autocomplete="off" onkeydown="if (event.keyCode == 13) document.getElementById('chatbutton').click()" autofocus/><br>
            <input class="userchat button" id="chatbutton" name="submitmsg" type="button" onclick="submitChat()" value="Send" />
          </form>
        </div>
      </div>
    </div>
</div>

<script>
  var form = document.querySelector('form[name="chatbox"]');
  form.addEventListener("submit", function (event) {
    event.preventDefault();
  });

  function submitChat() {
    var msg = user + ': ' + $('#m').val();
    socket.emit('chat message', msg );
    $('#m').val('');
  }

  var socket = io();
  user = Math.random();

  socket.on('chat message', function(msg) {
    $('#messages').append($('<li>').text(msg));
    var m = $('#room');
    m.scrollTop(m.prop("scrollHeight"));
  });
</script>
</body>
</html>


